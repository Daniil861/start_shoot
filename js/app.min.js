(()=>{"use strict";let e=!1;setTimeout((()=>{if(e){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),sessionStorage.getItem("preloader")&&(document.querySelector(".preloader")&&document.querySelector(".preloader").classList.add("_hide"),document.querySelector(".wrapper").classList.add("_visible")),sessionStorage.getItem("money")||sessionStorage.setItem("money",2500),document.querySelector(".score")&&document.querySelectorAll(".score").forEach((e=>{e.textContent=sessionStorage.getItem("money")}));const t=document.querySelector(".preloader"),o=document.querySelector(".wrapper"),s=document.documentElement.clientWidth,n=document.documentElement.clientHeight;let r,a,m,c;function i(e){e?r.play():r.pause()}function u(){"on"==sessionStorage.getItem("sound")&&(a.currentTime=0,a.play())}function l(e,t){let o=+sessionStorage.getItem("money");sessionStorage.setItem("money",o-e),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.add("_delete-money"))),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money")))}),500),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_delete-money")))}),1900)}function d(e){document.querySelectorAll(e).forEach((e=>e.classList.add("_no-money"))),setTimeout((()=>{document.querySelectorAll(e).forEach((e=>e.classList.remove("_no-money")))}),1400)}function g(e,t){return Math.floor(Math.random()*(t-e)+e)}function S(e,t,o,s){let n=Math.floor(+sessionStorage.getItem("money")+e);setTimeout((()=>{sessionStorage.setItem("money",n),document.querySelectorAll(t).forEach((e=>e.textContent=sessionStorage.getItem("money"))),document.querySelectorAll(t).forEach((e=>e.classList.add("_anim-add-money")))}),o),setTimeout((()=>{document.querySelectorAll(t).forEach((e=>e.classList.remove("_anim-add-money")))}),s)}function _(e,t){sessionStorage.setItem(t,JSON.stringify(e))}function y(e){let t=JSON.parse(sessionStorage.getItem(e));return t.sort((function(e,t){return e-t})),t}function p(e){"on"==sessionStorage.getItem("vibro")&&window.navigator.vibrate(e)}document.querySelector(".main")?(r=document.querySelector(".audio_main"),r.preload="auto",r.volume=[.1]):document.querySelector(".game")&&(r=document.querySelector(".audio_main"),a=document.querySelector(".audio_hit"),m=document.querySelector(".audio_destroy"),c=document.querySelector(".audio_shoot"),r.preload="auto",a.preload="auto",m.preload="auto",c.preload="auto",r.volume=[.1],a.volume=[.5],m.volume=[.5],c.volume=[.5]);let w=document.querySelectorAll(".icon-anim img");document.querySelector(".icon-anim img")&&setInterval((()=>{!function(){let e=g(0,3),t=["jump","scale","rotate"],o=g(0,w.length);w.forEach((e=>{e.classList.contains("_anim-icon-jump")?e.classList.remove("_anim-icon-jump"):e.classList.contains("_anim-icon-scale")?e.classList.remove("_anim-icon-scale"):e.classList.contains("_anim-icon-rotate")&&e.classList.remove("_anim-icon-rotate")})),setTimeout((()=>{w[o].classList.add(`_anim-icon-${t[e]}`)}),100)}()}),2e4);const I=1200,f=3500,q=4500,x=200,b=250,v=350,h=500,C=10,L=15,A=20,T=25,E={pwr_1:16,pwr_2:23,pwr_3:30,pwr_4:40,ammo_1:18,ammo_2:14,ammo_3:12,ammo_4:10};function $(){document.querySelector('[data-weapon="2"] .price').textContent=I/1e3+"k",document.querySelector('[data-weapon="3"] .price').textContent=f/1e3+"k",document.querySelector('[data-weapon="4"] .price').textContent=q/1e3+"k",document.querySelector('[data-power="1"]').textContent=x,document.querySelector('[data-power="2"]').textContent=b,document.querySelector('[data-power="3"]').textContent=v,document.querySelector('[data-power="4"]').textContent=h,document.querySelector('[data-ammo="1"]').textContent=C,document.querySelector('[data-ammo="2"]').textContent=L,document.querySelector('[data-ammo="3"]').textContent=A,document.querySelector('[data-ammo="4"]').textContent=T}function O(){if(!sessionStorage.getItem("weapons")){_(["1"],"weapons")}sessionStorage.getItem("current-weapon")||sessionStorage.setItem("current-weapon",1)}function k(){document.querySelector(".button__sound-txt").textContent=`sound: ${sessionStorage.getItem("sound")}`,document.querySelector(".button__music-txt").textContent=`music: ${sessionStorage.getItem("music")}`,document.querySelector(".button__vibro-txt").textContent=`vibration: ${sessionStorage.getItem("vibro")}`}function j(e){let t,o=e.dataset.weapon;2==o?t=I:3==o?t=f:4==o&&(t=q),+sessionStorage.getItem("money")>=t?(setTimeout((()=>{e.classList.add("_bought")}),0),l(t,".score"),function(e,t){let o=y(e);o.push(t),_(o,e)}("weapons",o)):+sessionStorage.getItem("money")<t&&d(".score")}function P(){let e=y("weapons"),t=document.querySelectorAll(".weapon");e.forEach((e=>{t.forEach((t=>{t.dataset.weapon==e&&setTimeout((()=>{t.classList.add("_bought")}),0)}))}))}function W(){let e=+sessionStorage.getItem("current-weapon");document.querySelectorAll(".weapon").forEach((t=>{t.dataset.weapon==e&&t.classList.add("_active")}))}function M(){sessionStorage.getItem("power-1")||sessionStorage.setItem("power-1",E.pwr_1),sessionStorage.getItem("power-2")||sessionStorage.setItem("power-2",E.pwr_2),sessionStorage.getItem("power-3")||sessionStorage.setItem("power-3",E.pwr_3),sessionStorage.getItem("power-4")||sessionStorage.setItem("power-4",E.pwr_4),document.querySelector('[data-item-power="1"]').textContent=sessionStorage.getItem("power-1"),document.querySelector('[data-item-power="2"]').textContent=sessionStorage.getItem("power-2"),document.querySelector('[data-item-power="3"]').textContent=sessionStorage.getItem("power-3"),document.querySelector('[data-item-power="4"]').textContent=sessionStorage.getItem("power-4"),sessionStorage.getItem("ammo-1")||sessionStorage.setItem("ammo-1",E.ammo_1),sessionStorage.getItem("ammo-2")||sessionStorage.setItem("ammo-2",E.ammo_2),sessionStorage.getItem("ammo-3")||sessionStorage.setItem("ammo-3",E.ammo_3),sessionStorage.getItem("ammo-4")||sessionStorage.setItem("ammo-4",E.ammo_4),document.querySelector('[data-item-ammo="1"]').textContent=sessionStorage.getItem("ammo-1"),document.querySelector('[data-item-ammo="2"]').textContent=sessionStorage.getItem("ammo-2"),document.querySelector('[data-item-ammo="3"]').textContent=sessionStorage.getItem("ammo-3"),document.querySelector('[data-item-ammo="4"]').textContent=sessionStorage.getItem("ammo-4")}function H(){"on"==sessionStorage.getItem("music")?(sessionStorage.setItem("music","off"),i(!1)):(sessionStorage.setItem("music","on"),i(!0)),setTimeout((()=>{document.querySelector(".button__music-txt").textContent=`music: ${sessionStorage.getItem("music")}`}),300)}document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main__body").classList.add("_active"),$(),function(){sessionStorage.getItem("sound")||sessionStorage.setItem("sound","off");sessionStorage.getItem("music")||sessionStorage.setItem("music","off");sessionStorage.getItem("vibro")||sessionStorage.setItem("vibro","off")}(),k(),O(),P(),W(),M(),sessionStorage.setItem("music","on"),H());let z=265;const B={currentHealth:265,currentPower:0};document.querySelector(".game")&&document.querySelector(".preloader").classList.contains("_hide")&&(!function(){let e=+sessionStorage.getItem("current-weapon");document.querySelector(".footer__ninja img").setAttribute("src",`img/characters/ninja-${e}.svg`)}(),function(){let e=+sessionStorage.getItem("current-weapon");1==e?document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-1"):2==e?document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-2"):3==e?document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-3"):4==e&&(document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-4"))}(),k(),function(){let e=g(1,3);document.querySelector(".wrapper").style.backgroundImage=`url("img/other/bg-${e}.jpg")`}(),function(){let e=+sessionStorage.getItem("current-weapon");1==e&&(B.currentPower=+sessionStorage.getItem("power-1"));2==e&&(B.currentPower=+sessionStorage.getItem("power-2"));3==e&&(B.currentPower=+sessionStorage.getItem("power-3"));4==e&&(B.currentPower=+sessionStorage.getItem("power-4"))}(),Y(),sessionStorage.setItem("music","on"),H());const J=s>600?600:300,X={currentWin:0};function Y(){let e=g(1,4),t=s>600?2:1;2==e?document.querySelector(".toy__image img").style.transform=`scale(${.7*t}) translate(-70px,-20px)`:3==e?document.querySelector(".toy__image img").style.transform=`scale(${1.4*t}) translate(0,-50px)`:1==e&&(document.querySelector(".toy__image img").style.transform=`scale(${1*t})`),document.querySelector(".toy__image img").setAttribute("src",`img/characters/toy-${e}.svg`)}function N(){let e=g(4,20),t=1.5*e,o=gsap.timeline({defaults:{duration:5,ease:"elastic.out(2.5, 0.2)"}});1==+sessionStorage.getItem("current-weapon")?(o.fromTo(".toy",{rotation:`${e}deg`},{rotation:"0"}),o.fromTo(".toy__image img",{rotation:`${t}deg`},{rotation:"0"},"<"),R(),u()):(!function(){let e=document.createElement("img"),t=n/7,o=n/6,s=n/5,r=g(15,80),a=0,m=g(-70,0),c=+sessionStorage.getItem("current-weapon");4==c?(a=g(150,250),e.style.left=0):2!=c&&3!=c||(e.style.right=0,a=g(-250,-150));e.classList.add("footer__gun"),e.setAttribute("src","img/icons/gun.svg"),document.querySelector(".footer__ninja").append(e);let i=gsap.timeline({defaults:{}});i.to(e,{x:r,y:-t,rotation:-45,duration:.25}),i.to(e,{x:a,y:-t-o,rotation:45,duration:.35}),i.to(e,{x:m,y:-t-o-s,rotation:-70,duration:.5,opacity:.1,onComplete:function(){e.remove()}})}(),"on"==sessionStorage.getItem("sound")&&(c.currentTime=0,c.play()),setTimeout((()=>{o.fromTo(".toy",{rotation:`${e}deg`},{rotation:"0"}),o.fromTo(".toy__image img",{rotation:`${t}deg`},{rotation:"0"},"<"),R(),u()}),900))}function R(){let e=navigator.userAgent.toLowerCase();-1===e.lastIndexOf("iphone")&&-1===e.lastIndexOf("ipad")&&-1===e.lastIndexOf("webos")&&p(100);let t=.8*Math.random()+.8,o=Math.floor(B.currentPower*t);B.currentHealth-=o,function(){let e=+sessionStorage.getItem("current-weapon");1==e?(sessionStorage.setItem("ammo-1",+sessionStorage.getItem("ammo-1")-1),document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-1")):2==e?(sessionStorage.setItem("ammo-2",+sessionStorage.getItem("ammo-2")-1),document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-2")):3==e?(sessionStorage.setItem("ammo-3",+sessionStorage.getItem("ammo-3")-1),document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-3")):4==e&&(sessionStorage.setItem("ammo-4",+sessionStorage.getItem("ammo-4")-1),document.querySelector(".guns__count").textContent=sessionStorage.getItem("ammo-4"))}(),function(){let e=-537-2.73*(100-100*B.currentHealth/z);if(document.querySelector(".fill").style.transform=`translateX(${e}px) translateY(-61px) scale(3)`,e<=-810){let e=navigator.userAgent.toLowerCase();-1===e.lastIndexOf("iphone")&&-1===e.lastIndexOf("ipad")&&-1===e.lastIndexOf("webos")&&p(500),function(){document.querySelector(".toy__image img").style.pointerEvents="none";let e=g(-100,100),t=g(-100,100);setTimeout((()=>{"on"==sessionStorage.getItem("sound")&&m.play()}),1750),gsap.to(".toy__image img",{x:e,y:t,rotation:360,opacity:0,scale:.1,duration:2,delay:.5,ease:"power3.in",onComplete:function(){document.querySelector(".toy__image img")&&document.querySelector(".toy__image img").remove(),document.querySelector(".win-text")||function(){let e=function(){let e=document.createElement("div");return e.textContent="Level Completed",e.classList.add("win-text"),e}();gsap.fromTo(e,{opacity:0,x:-150},{opacity:1,x:0,ease:"power3.in"}),document.querySelector(".game").append(e)}(),setTimeout((()=>{document.querySelector(".win").classList.add("_active"),S(X.currentWin,".score",500,1500)}),2e3)}})}(),document.querySelectorAll(".score-txt").forEach((e=>e.textContent=X.currentWin))}}(),function(e){let t=document.createElement("div");t.textContent=`+${Math.floor(e)}`,document.querySelector(".game__body").append(t),t.style.cssText=`\n\t\tposition: absolute;\n\t\ttop: ${J-50}px;\n\t\tleft: 50%;\n\t\tz-index: 4;\n\t\ttransform: translate(-50%, -50%);\n\t\tcolor: rgba(255, 255, 255, 0.27);\n\t\tfont-size: 36px;\n\t\t-webkit-text-stroke: 1px #2071C5;\n\t`;let o=g(-150,150),s=g(-150,150);gsap.to(t,{rotation:"360deg",x:o,y:s,duration:1}),setTimeout((()=>{t.remove()}),1500)}(o),S(o,".score",500,1500),X.currentWin+=o;let s=g(1,5);for(let e=0;e<s;e++)U()}function U(){let e=document.createElement("img");e.setAttribute("src","img/icons/toy-piece.svg"),e.setAttribute("alt","icon"),document.querySelector(".game__body").append(e),e.style.cssText=`\n\t\tposition: absolute;\n\t\ttop: ${J-50}px;\n\t\tleft: 50%;\n\t\tz-index: 4;\n\t\ttransform: translate(-50%, -50%);\n\t`;let t=g(-100,100),o=g(-100,100),s=g(180,360);gsap.to(e,{rotation:`${s}deg`,x:t,y:o,ease:"back.out(3)",duration:.5}),setTimeout((()=>{e.remove()}),1500)}function F(){X.currentWin=0,B.currentHealth=z,document.querySelector(".win-text")&&gsap.to(".win-text",{x:100,opacity:0,duration:.75,delay:.3,ease:"power3.in",onComplete:function(){document.querySelector(".win-text").remove()}}),function(){let e=document.createElement("img");e.setAttribute("src","img/characters/toy-1.svg"),document.querySelector(".toy__image").append(e)}(),Y(),document.querySelector(".fill").style.transform="translateX(-537px) translateY(-61px) scale(3)"}document.addEventListener("click",(e=>{let s=e.target;var n;if(s.closest(".preloader__button")&&setTimeout((()=>{sessionStorage.setItem("preloader",!0),t.classList.add("_hide"),o.classList.add("_visible"),document.querySelector(".main")&&document.querySelector(".preloader").classList.contains("_hide")&&(document.querySelector(".main__body").classList.add("_active"),O(),$(),P(),W(),M())}),300),s.closest(".header__params")&&setTimeout((()=>{document.querySelector(".main__body").classList.add("_params")}),0),s.closest(".header__store")&&document.querySelector(".main__body").classList.add("_store"),s.closest(".main__weapons")&&!s.closest(".weapons__body")&&document.querySelector(".main__body").classList.remove("_store"),!s.closest(".settings__icon-closes")&&s.closest(".settings__body")||!document.querySelector(".main")||document.querySelector(".main__body").classList.contains("_params")&&document.querySelector(".main__body").classList.remove("_params"),s.closest(".header-game__icon-params")&&setTimeout((()=>{document.querySelector(".game__body").classList.add("_params")}),0),!s.closest(".settings__icon-closes")&&s.closest(".settings__body")||!document.querySelector(".game")||document.querySelector(".game__body").classList.contains("_params")&&document.querySelector(".game__body").classList.remove("_params"),s.closest(".settings__button_sound")&&("on"==sessionStorage.getItem("sound")?sessionStorage.setItem("sound","off"):sessionStorage.setItem("sound","on"),setTimeout((()=>{document.querySelector(".button__sound-txt").textContent=`sound: ${sessionStorage.getItem("sound")}`}),300)),s.closest(".settings__button_music")&&H(),s.closest(".settings__button_vibro")&&function(){let e=navigator.userAgent.toLowerCase();"on"==sessionStorage.getItem("vibro")?(sessionStorage.setItem("vibro","off"),-1===e.lastIndexOf("iphone")&&-1===e.lastIndexOf("ipad")&&-1===e.lastIndexOf("webos")&&window.navigator.vibrate(0)):(sessionStorage.setItem("vibro","on"),-1===e.lastIndexOf("iphone")&&-1===e.lastIndexOf("ipad")&&-1===e.lastIndexOf("webos")&&setTimeout((()=>{window.navigator.vibrate(100)}),400)),setTimeout((()=>{document.querySelector(".button__vibro-txt").textContent=`vibration: ${sessionStorage.getItem("vibro")}`}),300)}(),s.closest(".settings__button_privacy")&&(sessionStorage.removeItem("privacy"),t.classList.add("_show"),o.classList.add("_hide"),setTimeout((()=>{t.classList.remove("_hide"),t.classList.remove("_show"),o.classList.remove("_visible"),o.classList.remove("_hide")}),1e3),document.querySelector(".main__body").classList.remove("_params")),s.closest(".weapon__btn-buy")&&j(s.closest(".weapon")),s.closest('[data-btn="ammo"]')&&(1==(n=s.closest(".weapon").dataset.weapon)&&C<=+sessionStorage.getItem("money")?(sessionStorage.setItem("ammo-1",+sessionStorage.getItem("ammo-1")+1),l(C,".score"),document.querySelector('[data-item-ammo="1"]').textContent=sessionStorage.getItem("ammo-1")):2==n&&L<=+sessionStorage.getItem("money")?(sessionStorage.setItem("ammo-2",+sessionStorage.getItem("ammo-2")+1),l(L,".score"),document.querySelector('[data-item-ammo="2"]').textContent=sessionStorage.getItem("ammo-2")):3==n&&A<=+sessionStorage.getItem("money")?(sessionStorage.setItem("ammo-3",+sessionStorage.getItem("ammo-3")+1),l(A,".score"),document.querySelector('[data-item-ammo="3"]').textContent=sessionStorage.getItem("ammo-3")):4==n&&T<=+sessionStorage.getItem("money")&&(sessionStorage.setItem("ammo-4",+sessionStorage.getItem("ammo-4")+1),l(T,".score"),document.querySelector('[data-item-ammo="4"]').textContent=sessionStorage.getItem("ammo-4"))),s.closest('[data-btn="power"]')&&function(e){1==e&&x<=+sessionStorage.getItem("money")?(++E.pwr_1,l(x,".score"),document.querySelector('[data-item-power="1"]').textContent=E.pwr_1,sessionStorage.setItem("power-1",E.pwr_1)):2==e&&b<=+sessionStorage.getItem("money")?(++E.pwr_2,l(b,".score"),document.querySelector('[data-item-power="2"]').textContent=E.pwr_2,sessionStorage.setItem("power-2",E.pwr_2)):3==e&&v<=+sessionStorage.getItem("money")?(++E.pwr_3,l(v,".score"),document.querySelector('[data-item-power="3"]').textContent=E.pwr_3,sessionStorage.setItem("power-3",E.pwr_3)):4==e&&h<=+sessionStorage.getItem("money")&&(++E.pwr_4,l(h,".score"),document.querySelector('[data-item-power="4"]').textContent=E.pwr_4,sessionStorage.setItem("power-4",E.pwr_4))}(s.closest(".weapon").dataset.weapon),s.closest(".weapon__body")&&s.closest(".weapon").classList.contains("_bought")&&!s.closest(".weapon__buttons")){document.querySelectorAll(".weapon").forEach((e=>e.classList.remove("_active")));let e=+s.closest(".weapon").dataset.weapon;sessionStorage.setItem("current-weapon",e),s.closest(".weapon").classList.add("_active")}if(s.closest(".win__button")&&(F(),document.querySelector(".win").classList.remove("_active")),s.closest(".toy__image img")){+document.querySelector(".guns__count").textContent>0?N():d(".guns__count")}s.closest(".weapon__btn")&&gsap.to(s.closest(".weapon__btn"),{y:20,duration:.05,boxShadow:"0px 0px 0px #004a04",yoyo:!0,repeat:1}),s.closest(".header__params")&&gsap.to(s.closest(".header__params"),{rotation:-30,duration:.05,yoyo:!0,repeat:1}),s.closest(".header-game__icon-params")&&gsap.to(s.closest(".header-game__icon-params"),{rotation:-30,duration:.05,yoyo:!0,repeat:1}),s.closest(".header-game__btn-home")&&gsap.to(s.closest(".header-game__btn-home"),{rotation:-30,duration:.05,yoyo:!0,repeat:1}),s.closest(".header__store")&&gsap.to(s.closest(".header__store"),{rotation:30,duration:.05,yoyo:!0,repeat:1}),s.closest(".settings__icon-closes")&&gsap.to(s.closest(".settings__icon-closes"),{y:"-50%",scale:.9,duration:.05,yoyo:!0,repeat:1}),s.closest(".preloader__button")&&gsap.to(s.closest(".preloader__button"),{y:10,boxShadow:"0px 1px 0px #33104f",duration:.05,yoyo:!0,repeat:1}),s.closest(".button_blue")&&gsap.to(s.closest(".button_blue"),{y:10,boxShadow:"0px 1px 0px #33104f",duration:.05,yoyo:!0,repeat:1})})),window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),window.addEventListener("load",(function(){document.querySelector("body")&&setTimeout((function(){document.querySelector("body").classList.add("_loaded")}),200)}))})();